\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{aeguill}
\usepackage{hyperref}
\usepackage{verbatim}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{tikz}
%\usepackage{fullpage}


\newcommand{\strid}{\textsl{strid}}
\newcommand{\example}[1]{\begin{center}\fbox{\begin{minipage}{11cm}#1\end{minipage}}\end{center}}

\title{strid -- A string diagrams generator}
\author{Samuel Mimram\and Nicolas Tabareau}
\begin{document}
\maketitle
\tableofcontents
\newpage

\strid{} is a string diagrams generator for inclusion into \LaTeX{} files. It is still in very $\alpha$ stage but already quite useable. It is entirely programmed in OCaml\footnote{OCaml can be downloaded at \url{http://caml.inria.fr/}.}. Feel free to drop me a line at \url{samuel.mimram@pps.jussieu.fr} if you have some comments, bug reports or feature requests about it.

\section{A first example}
%\begin{figure}[ht!]
\example{
Suppose that $(\mathcal{C},\otimes,I)$ is a strict monoidal category. A \emph{monoid} in $\mathcal{C}$ is an object $M$ of $\mathcal{C}$ together with two maps $\mu:M\otimes M\to M$, called \emph{multiplication}, and $\eta:I\to M$, called \emph{unit}, respectively drawn as
\[
\input{monoid_mult.tex}
\]
and
\[
\input{monoid_unit.tex}
\]
such that the equalities
\[
\input{monoid_assoc_l.tex}
\qquad\raisebox{2.2em}{=}\qquad
\input{monoid_assoc_r.tex}
\]
and
\[
\input{monoid_neutral_l.tex}
\quad\raisebox{1.4em}{=}\quad
\input{monoid_neutral.tex}
\quad\raisebox{1.4em}{=}\quad
\input{monoid_neutral_r.tex}
\]
hold.
}
%\caption{Definition of monoid objects.}
%\end{figure}

Let's have a look at how we typeset the left member of the associativity equation:
\[
\input{monoid_assoc_l.tex}
\]
The \strid{} code for this figure is
\verbatiminput{monoid_assoc_l.strid}

Despite it's apparent complexity, this code is very simple! Like every \strid{} diagram, this code starts with ``\verb+matrix {+'' and ends with ``\verb+}+''. Between those lines comes the actual description of the diagram. It is structured as a matrix whose colums are separated by ``\verb+&+'' and whose lines are separated by ``\verb+\\+''.

The rightmost multiplication is typeset by
\begin{center}
\verb+mult(ull,dl,r)+
\end{center}
Here, ``\verb+mult+'' is the kind of the operator (a multiplication-shaped one) and its arguments specify that it should be linked to the relative positions $(-2,1)$ (\verb+ull+ means up-left-left), $(-1,-1)$ (\verb+dl+ means down-left) and $(1,0)$. The orders in which the links should be specified is indicated on the figure below:
\[
\input{order_mult.tex}
\]
As for other operators, links are specified inputs first and then outputs.

The labels are specified similarly by instructions like
\begin{center}
\verb+text(,r)[l,t=#$M$#]+
\end{center}
This create a ``\verb+text+'' operator from here to the relative position $(1,0)$. The brackets ``\verb+[l,t=#$M$#]+'' are here to specify optional parameters related to this operator. The ``\verb+l+'' indicates that we are going to add a label and the ``\verb+t=#$M$#+'' means that the label's text should be ``\verb+$M$+''. The text between \verb+#+ is quoted uninterpreted.

Suppose that we have put the text of this figure in a file named \verb+monoid_assoc_l.strid+. Compiling this file can be simply done by typing
\begin{center}
\verb+strid monoid_assoc_l.strid+
\end{center}
This generates a file \verb+strid monoid_assoc_l.tex+ which can be used in a \LaTeX{} file like:
\begin{verbatim}
\documentclass{article}

\usepackage{tikz}

\begin{document}
\input{strid monoid_assoc_l.tex}
\end{document}
\end{verbatim}

\section{The language of matrices}
\subsection{Labels}
Labels can be added to operators. For example the diagram
\[
\input{mult_label.tex}
\]
can be typeset by
\verbatiminput{mult_label.strid}
If you don't like the size of the ellipse surrounding the label, this can of course be changed. For example,
\[
\input{mult_small_label.tex}
\]
can be typeset by
\verbatiminput{mult_small_label.strid}

\subsection{Regions}
Regions can be delimited:
\[
\input{pl_composition.tex}
\]
is typeset by
\verbatiminput{pl_composition.strid}

\section{The operators}
\subsection{Line: \texttt{line}}
\[
\input{order_line.tex}
\]
\subsection{Multiplication: \texttt{mult}}
\[
\input{order_mult.tex}
\]
\subsection{Unit: \texttt{unit}}
\[
\input{order_unit.tex}
\]
\subsection{Symmetry: \texttt{sym}}
\[
\input{order_sym.tex}
\]
\subsection{Braiding: \texttt{braid}}
\[
\input{order_braid.tex}
\]
\subsection{$m,n$-ary box: \texttt{$m$box$n$}}
\[
\input{order_nboxm.tex}
\]

\section{Examples}
\subsection{Yang-Baxter equality for braids}
\[
\input{yang_baxter_l.tex}
\qquad\raisebox{3.2em}{=}\qquad
\input{yang_baxter_r.tex}
\]
Left member is typeset by
\verbatiminput{yang_baxter_l.strid}
and right member by
\verbatiminput{yang_baxter_r.strid}

\newcommand{\A}{\mathbb{A}}
\newcommand{\B}{\mathbb{B}}
\newcommand{\C}{\mathbb{C}}
\subsection{Naturality condition for natural transformations between two lax functors between bicategories}

\begin{center}
\begin{tabular}{ccc}
{\scriptsize $\input{bicat_nat_transfo_l.tex}$}
&
\hspace{0mm}
\raisebox{5cm}{$=$}
\hspace{8mm}
&
{\scriptsize $\input{bicat_nat_transfo_r.tex}$}
\end{tabular}
\end{center}

\noindent The code for the left-hand side of the equation is
{\scriptsize \verbatiminput{bicat_nat_transfo_l.strid}}
\noindent and the code for the right-hand side is
{\scriptsize \verbatiminput{bicat_nat_transfo_r.strid}}

\end{document}
